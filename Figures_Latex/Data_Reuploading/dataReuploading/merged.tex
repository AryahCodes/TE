\documentclass[margin=10pt]{standalone}
\usepackage{pgfplots}
\usetikzlibrary{pgfplots.groupplots}
\pgfplotsset{compat=newest}
\usepackage{subcaption}


\setlength{\textwidth}{460pt}


\definecolor{color1}{HTML}{1b9e77}
\definecolor{color2}{HTML}{d95f02}
\definecolor{color3}{HTML}{7570b3}
\definecolor{color4}{HTML}{e7298a}
\definecolor{color5}{HTML}{66a61e}
\definecolor{color6}{HTML}{e6ab02}
\definecolor{color7}{HTML}{a6761d}

\usepackage{palatino}
\newlength{\mainwidth}
\setlength{\mainwidth}{440pt}

\begin{document}

\begin{tikzpicture}
\begin{groupplot}[
    group style={
        group size=2 by 1,  % two plots side by side
        horizontal sep=1.5cm,
    },
    width=0.55\textwidth,  % adjust the width of each plot
    height=0.3\textwidth,
]
    % First plot
    \nextgroupplot[
        xlabel={Layer Pairs},
        ylabel={Loss},
        title={Equation (a)},
        grid=major,
        ymode=log,
        legend to name=sharedlegend,  % Create a named legend
        legend columns=-1,  % Adjust the number of columns in the legend
        ytick={0.00001,0.0001,0.001,0.01,0.1,1,10},
    ]  
    \addplot[color=color2, thick, mark=*] table [x=N_LAYER, y=mean_loss, col sep=space] {data_a.dat};
    \addlegendentry{Mean}
    \addplot[color=color2, thick, dashed, mark=o,mark options={solid}] table [x=N_LAYER, y=min_loss, col sep=space] {data_a.dat};
    \addlegendentry{Min}
    \addplot[color=color3, very thick, mark=square*] table [x=N_LAYER, y=mean_loss_basis, col sep=space] {data_a.dat};
    \addlegendentry{Mean FNN Embedding}
    \addplot[color=color3, thick, dashed, mark=square,mark options={solid}] table [x=N_LAYER, y=min_loss_basis, col sep=space] {data_a.dat};
    \addlegendentry{Min FNN Embedding}
    \nextgroupplot[
        xlabel={Layer Pairs},
        title={Equation (b)},
        grid=major,
        ymode=log,
        ytick={0.00001,0.0001,0.001,0.01,0.1,1,10},
        ymax=10,
        ymin=0.00001,
    ]
    \addplot[color=color2, very thick, mark=*,] table [x=N_LAYER, y=mean_loss, col sep=space] {data_b.dat};
    \addplot[color=color2, thick, dashed, mark=o, mark options={solid}] table [x=N_LAYER, y=min_loss, col sep=space] {data_b.dat};
    \addplot[color=color3, very thick,mark=square*,] table [x=N_LAYER, y=mean_loss_basis, col sep=space] {data_b.dat};
    \addplot[color=color3, thick, dashed, mark=square, mark options={solid}] table [x=N_LAYER, y=min_loss_basis, col sep=space] {data_b.dat};
\end{groupplot}

% Place the shared legend below both plots
\node at (group c1r1.south|-current bounding box.south)
    [anchor=north,yshift=-5pt, xshift=3.6cm] {\ref{sharedlegend}};
\end{tikzpicture}

\end{document}

